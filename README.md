# BM25 ä¸­æ–‡æ–‡æœ¬æœç´¢

åŸºäº Rust + PyO3 çš„é«˜æ€§èƒ½ BM25 ä¸­æ–‡æ–‡æœ¬æœç´¢åº“ï¼Œä½¿ç”¨ jieba-rs è¿›è¡Œä¸­æ–‡åˆ†è¯ã€‚

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: Rust å®ç°ï¼Œæ¯”çº¯ Python å¿«æ•°å€
- ğŸ”¤ **ä¸­æ–‡åˆ†è¯**: å†…ç½® jieba-rs åˆ†è¯å™¨
- ğŸ¯ **ç²¾ç¡®æœç´¢**: ç»å…¸ BM25 ç®—æ³•
- ğŸ **Python API**: ç®€æ´æ˜“ç”¨çš„æ¥å£

## å®‰è£…

```bash
# å¼€å‘æ¨¡å¼å®‰è£…
uv run maturin develop

# æˆ–æ„å»º wheel
maturin build --release
pip install target/wheels/*.whl
```

## å¿«é€Ÿå¼€å§‹

```python
from bm25 import BM25

# å‡†å¤‡æ–‡æ¡£
documents = [
    "Pythonæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„é«˜çº§ç¼–ç¨‹è¯­è¨€",
    "æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯",
    "æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„å­é¢†åŸŸ",
]

# åˆ›å»ºå¹¶è®­ç»ƒæ¨¡å‹
bm25 = BM25(k1=1.5, b=0.75)
bm25.fit(documents)

# æœç´¢
results = bm25.search("æœºå™¨å­¦ä¹ ", top_k=3)
for doc_idx, score in results:
    print(f"[{score:.4f}] {documents[doc_idx]}")
```

## API å‚è€ƒ

### `BM25(k1=1.5, b=0.75)`

åˆ›å»º BM25 å®ä¾‹ã€‚

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `k1` | float | 1.5 | è¯é¢‘é¥±å’Œå‚æ•° |
| `b` | float | 0.75 | æ–‡æ¡£é•¿åº¦å½’ä¸€åŒ–å‚æ•° |

### `fit(documents: list[str])`

ä½¿ç”¨æ–‡æ¡£è¯­æ–™åº“è®­ç»ƒæ¨¡å‹ã€‚

### `search(query: str, top_k: int = None) -> list[tuple[int, float]]`

æœç´¢æœ€ç›¸å…³çš„æ–‡æ¡£ï¼Œè¿”å› `(æ–‡æ¡£ç´¢å¼•, åˆ†æ•°)` åˆ—è¡¨ã€‚

### `get_scores(query: str) -> list[float]`

è·å–æ‰€æœ‰æ–‡æ¡£çš„ BM25 åˆ†æ•°ã€‚

## å¼€å‘

```bash
# å®‰è£…ä¾èµ–
uv sync

# ç¼–è¯‘å¹¶å®‰è£…
uv run maturin develop

# è¿è¡Œæµ‹è¯•
uv run pytest

# è¿è¡Œç¤ºä¾‹
uv run python examples/demo.py
```

## æŠ€æœ¯æ ˆ

| ç»„ä»¶ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| PyO3 | 0.27.2 | Rust-Python ç»‘å®š |
| maturin | 1.11.5 | æ„å»ºå·¥å…· |
| jieba-rs | 0.8.1 | ä¸­æ–‡åˆ†è¯ |

## License

MIT
